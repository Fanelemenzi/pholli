{% extends 'base.html' %}
{% load static %}

{% block title %}Survey Error - Fallback Options{% endblock %}

{% block extra_css %}
<style>
    .fallback-container {
        max-width: 800px;
        margin: 2rem auto;
        padding: 2rem;
        background: white;
        border-radius: 8px;
        box-shadow: 0 2px 10px rgba(0,0,0,0.1);
    }
    
    .error-header {
        text-align: center;
        margin-bottom: 2rem;
    }
    
    .error-icon {
        font-size: 3rem;
        color: #ffc107;
        margin-bottom: 1rem;
    }
    
    .fallback-option {
        border: 1px solid #e9ecef;
        border-radius: 6px;
        padding: 1.5rem;
        margin: 1rem 0;
        transition: all 0.3s ease;
    }
    
    .fallback-option:hover {
        border-color: #007bff;
        box-shadow: 0 2px 8px rgba(0,123,255,0.1);
    }
    
    .fallback-option h5 {
        color: #007bff;
        margin-bottom: 0.5rem;
    }
    
    .fallback-option p {
        margin-bottom: 1rem;
        color: #6c757d;
    }
    
    .error-details {
        background: #f8f9fa;
        padding: 1rem;
        border-radius: 6px;
        margin: 1.5rem 0;
        border-left: 4px solid #ffc107;
    }
    
    .btn-fallback {
        margin-top: 0.5rem;
    }
</style>
{% endblock %}

{% block content %}
<div class="fallback-container">
    <div class="error-header">
        <div class="error-icon">⚠️</div>
        <h2>Survey Processing Issue</h2>
        <p class="text-muted">We encountered an issue processing your survey, but we have alternative options available.</p>
    </div>
    
    {% if error_type != 'unknown' %}
    <div class="error-details">
        <h6>What happened?</h6>
        {% if error_type == 'processing_error' %}
            <p>There was an issue processing your survey responses. This might be due to a temporary system issue or incomplete data.</p>
        {% elif error_type == 'session_error' %}
            <p>Your survey session encountered an issue. This could be due to session expiry or connectivity problems.</p>
        {% elif error_type == 'validation_error' %}
            <p>Some of your survey responses couldn't be validated. This might be due to data format issues.</p>
        {% else %}
            <p>An unexpected issue occurred while processing your survey.</p>
        {% endif %}
    </div>
    {% endif %}
    
    <h4>Available Options</h4>
    <p class="text-muted">Choose one of the following options to continue:</p>
    
    {% for option in fallback_options %}
    <div class="fallback-option">
        <h5>{{ option.title }}</h5>
        <p>{{ option.description }}</p>
        <a href="{{ option.url }}" class="btn btn-primary btn-fallback">
            {% if option.type == 'basic_comparison' %}
                View Policies
            {% elif option.type == 'new_survey' %}
                Start Survey
            {% else %}
                Continue
            {% endif %}
        </a>
    </div>
    {% endfor %}
    
    <hr class="my-4">
    
    <div class="text-center">
        <h6>Need Help?</h6>
        <p class="text-muted">
            If you continue to experience issues, please contact our support team.
        </p>
        <a href="mailto:support@example.com" class="btn btn-outline-secondary btn-sm">
            Contact Support
        </a>
    </div>
</div>
{% endblock %}